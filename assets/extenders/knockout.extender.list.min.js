ko.extenders.list=function(e,t){return t=$.extend({name:"undefiendListName",viewmodel:!1,key:{},id:["id"],update:!0},t),console.log("list",t),t.viewmodel&&t.parent&&(e.assign=function(){var n=e()||[];n.length>0&&t.key!={}&&$.each(n,function(n,i){$.each(t.key,function(n,a){$.inArray(a,i._attributes)<0&&i._attributes.push(a),i[a]=ko.computed({owner:e,read:function(){return t.parent[n]()},write:function(){}})})})},e.subscribe(function(){e.assign()}),e.assign()),e.get=function(){if(t.viewmodel){var n=e()||[];return ko.utils.arrayMap(n,function(e){return e.get()})}return e()||[]},e.set=function(n){if(n=n||[],t.viewmodel){var i=t.viewmodel;e(ko.utils.arrayMap(n,function(e){return new i(e)}))}else e(n)},e.add=function(n){n=n||{};var i=n.get?n.get():n;e.push(t.viewmodel?new t.viewmodel(i):i)},e.edit=function(n){t.viewmodel?e.editItem.set(n?n.get():t.defaults||{}):e.editItem(n?n:t.defaults)},e.update=function(){var n=e.editItem();t.update&&n.update(function(){return t.redirect||!1})},e.validate=function(){var t=e()||[];console.log("list val"),$.each(t,function(e,t){console.log(t),t&&t.validate&&t.validate()})},e.getDefaults=function(){return t.viewmodel?new t.viewmodel(t.defaults||{}):t.defaults||{}},e.editItem=ko.observable(e.getDefaults()),e.addItem=ko.observable(e.getDefaults()),e};