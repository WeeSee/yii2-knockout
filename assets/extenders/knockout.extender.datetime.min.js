ko.extenders.hours=[{key:0,value:"00"},{key:1,value:"01"},{key:2,value:"02"},{key:3,value:"03"},{key:4,value:"04"},{key:5,value:"05"},{key:6,value:"06"},{key:7,value:"07"},{key:8,value:"08"},{key:9,value:"09"},{key:10,value:"10"},{key:11,value:"11"},{key:12,value:"12"},{key:13,value:"13"},{key:14,value:"14"},{key:15,value:"15"},{key:16,value:"16"},{key:17,value:"17"},{key:18,value:"18"},{key:19,value:"19"},{key:20,value:"20"},{key:21,value:"21"},{key:22,value:"22"},{key:23,value:"23"}],ko.extenders.minutes=[{key:0,value:"00"},{key:15,value:"15"},{key:30,value:"30"},{key:45,value:"45"}],ko.extenders.date_db="YYYY-MM-DD HH:mm:ss",ko.extenders.datetime=function(e,t){function o(e){var n=null;if(e&&null!=e&&""!=e){var o=1==t.utc?moment.utc(e,u).local():moment(e,u);t.round&&o&&o.isValid()&&(o.minute(o.minute()-o.minute()%t.timespan),o.second(0)),n=o}return n}e.minutes=ko.extenders.minutes,e.hours=ko.extenders.hours,t=$.extend({utc:!1,date:!0,datetime:!1,year:!1,month:!1,day:!1,hour:!1,minute:!1,time:!1,round:!0,format:"YYYY-MM-DD",timespan:15,"null":!0},t);var u=ko.extenders.date_db;return e.moment=ko.observable(o(e())),e.moment.subscribe(function(n){e(null==n?n:e.moment().format(u))}),e.subscribe(function(n){e.moment(o(n))}),e.date=ko.computed({owner:e,read:function(){var n=e.moment();return null!=n?n.format(t.format):""},write:function(o){if(o&&null!=o&&""!=o){var m=parseInt(o);if(m==o)var r=moment().add("days",o);else var r=moment(o,t.format);t.round&&r&&r.isValid()&&(r.minute(r.minute()-r.minute()%t.timespan),r.second(0)),n=e.moment(),null!=n?(n.year(r.year()),n.month(r.month()),n.date(r.date())):n=r,e(n.format(u))}else e(null)}}),(t.time||t.datetime)&&(e.hour=ko.computed({owner:e,read:function(){var n=e.moment();return null!=n?n.hours():""},write:function(n){if(void 0!=n&&null!==n&&""!==n){var t=e.moment();null==t&&(t=moment(),t.minutes(0),t.seconds(0)),t.hours(n),e(t.format(u))}else e(null)}})),(t.time||t.datetime)&&(e.minute=ko.computed({owner:e,read:function(){var n=e.moment();return null!=n?n.minute():""},write:function(n){if(void 0!=n&&null!==n&&""!==n){var o=e.moment();null==o&&(o=moment(),o.seconds(0)),o.minutes(n),t.round&&o.minute(o.minute()-o.minute()%t.timespan),e(o.format(u))}else e(null)}})),e.year=ko.computed({owner:e,read:function(){var n=e.moment();return null!=n?n.year():""},write:function(n){if(void 0!=n&&null!==n&&""!==n){var t=e.moment();null==t&&(t=moment(),t.seconds(0)),t.year(n),e(t.format(u))}else e(null)}}),e.month=ko.computed({owner:e,read:function(){var n=e.moment();return null!=n?n.month()+1:""},write:function(n){if(void 0!=n&&null!==n&&""!==n){var t=e.moment();null==t&&(t=moment(),t.seconds(0)),t.month(n-1),e(t.format(u))}else e(null)}}),e.current=function(){e(o(moment().format(u)).format(u))},e.clear=function(){e(null)},e.display=e.date,e},ko.extenders.date=function(e,t){function o(e){var n=null;if(e&&null!=e&&""!=e){var o=1==t.utc?moment.utc(e,u).local():moment(e,u);t.round&&o&&o.isValid()&&(o.minute(o.minute()-o.minute()%t.timespan),o.second(0)),n=o}return n}t=$.extend({utc:!1,date:!0,datetime:!1,year:!1,month:!1,day:!1,hour:!1,minute:!1,time:!1,round:!1,format:"YYYY-MM-DD",timespan:15,"null":!0},t);var u=ko.extenders.date_db;return e.moment=ko.computed({owner:e,read:function(){var n=e();return o(n)},write:function(n){n&&n.isValid()&&e(n.format(u))}}),e.date=ko.computed({owner:e,read:function(){var n=e.moment();return null!=n?n.format(t.format):""},write:function(o){if(o&&null!=o&&""!=o){var m=parseInt(o);if(m==o)var r=moment().add("days",o);else var r=moment(o,t.format);t.round&&r&&r.isValid()&&(r.minute(r.minute()-r.minute()%t.timespan),r.second(0)),n=e.moment(),null!=n?(n.year(r.year()),n.month(r.month()),n.date(r.date())):n=r,e(n.format(u))}else e(null)}}),e.year=ko.computed({owner:e,read:function(){var n=e.moment();return null!=n?n.year():""},write:function(n){if(void 0!=n&&null!==n&&""!==n){var t=e.moment();null==t&&(t=moment(),t.seconds(0)),t.year(n),e(t.format(u))}else e(null)}}),e.month=ko.computed({owner:e,read:function(){var n=e.moment();return null!=n?n.month()+1:""},write:function(n){if(void 0!=n&&null!==n&&""!==n){var t=e.moment();null==t&&(t=moment(),t.seconds(0)),t.month(n-1),e(t.format(u))}else e(null)}}),e.current=function(){e(o(moment().format(u)).format(u))},e.clear=function(){e(null)},e.display=e.date,e};