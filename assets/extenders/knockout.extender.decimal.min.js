function number_format(e,a,r,n){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var t=isFinite(+e)?+e:0,o=isFinite(+a)?Math.abs(a):0,l="undefined"==typeof n?",":n,d="undefined"==typeof r?".":r,i="",u=function(e,a){var r=Math.pow(10,a);return""+(Math.round(e*r)/r).toFixed(a)};return i=(o?u(t,o):""+Math.round(t)).split("."),i[0].length>3&&(i[0]=i[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,l)),(i[1]||"").length<o&&(i[1]=i[1]||"",i[1]+=new Array(o-i[1].length+1).join("0")),i.join(d)}var _n_=1234.5.toLocaleString(),fn=function(e,a,r){var n=e.indexOf(a),t=e.indexOf(r);return t>n+1?e.substring(n+1,t):null};ko.extenders.thousandsSeparator=fn(_n_,"1","2")||"",ko.extenders.decimalSeparator=fn(_n_,"4","5")||".",ko.extenders.decimal=function(e,a){return a=$.extend({decimals:2,decimalSeparator:ko.extenders.decimalSeparator,thousandsSeparator:ko.extenders.thousandsSeparator,nullable:!0,percent:!1},a),null==a.thousandsSeparator&&(a.thousandsSeparator=ko.extenders.thousandsSeparator),null==a.decimalSeparator&&(a.decimalSeparator=ko.extenders.decimalSeparator),e.decimal=ko.computed({owner:this,read:function(){var r=e();return $.isNumeric(r)?a.percent?number_format(100*r,a.decimals,a.decimalSeparator,a.thousandsSeparator):number_format(r,a.decimals,a.decimalSeparator,a.thousandsSeparator):a.nullable?"":number_format(0,a.decimals,a.decimalSeparator,a.thousandsSeparator)},write:function(r){r=r.replace(a.thousandsSeparator,""),r=r.replace(a.decimalSeparator,".");var n,t=parseFloat(r);$.isNumeric(t)?(t=a.percent?t/100:t,n=t.toFixed(a.decimals+a.percent?2:0)):n=a.nullable?"":0,e()!==n?e(n):e.display.notifySubscribers(n)}}),e.clear=function(){e(a.nullable?null:0)},e.display=e.decimal,e},ko.extenders.percent=function(e,a){return a=$.extend({decimals:0,nullable:!0,thousandsSeparator:null,decimalSeparator:null},a),e.percent=ko.computed({owner:e,read:function(){var r=e();return null!=r&&void 0!=r&&""!=r?number_format(100*r,a.decimals,a.decimalSeparator,a.thousandsSeparator):a.nullable?"":0},write:function(r){r=r.replace(a.thousandsSeparator,""),r=r.replace(a.decimalSeparator,".");var n=parseFloat(r);e(null!=n&&void 0!=n&&""!=n?r/100:a.nullable?null:0)}}),e.clear=function(){e(null)},e.display=e.percent,e};