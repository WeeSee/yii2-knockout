function number_format(e,a,r,t){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var n=isFinite(+e)?+e:0,o=isFinite(+a)?Math.abs(a):0,l="undefined"==typeof t?",":t,i="undefined"==typeof r?".":r,d="",u=function(e,a){var r=Math.pow(10,a);return""+(Math.round(e*r)/r).toFixed(a)};return d=(o?u(n,o):""+Math.round(n)).split("."),d[0].length>3&&(d[0]=d[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,l)),(d[1]||"").length<o&&(d[1]=d[1]||"",d[1]+=new Array(o-d[1].length+1).join("0")),d.join(i)}var _n_=1234.5.toLocaleString();ko.extenders.thousandsSeparator=_n_.toLocaleString().substring(1,2),ko.extenders.decimalSeparator=_n_.toLocaleString().substring(5,6),ko.extenders.decimal=function(e,a){return a=$.extend({decimals:2,decimalSeparator:ko.extenders.decimalSeparator,thousandsSeparator:ko.extenders.thousandsSeparator,nullable:!0,percent:!1},a),e.decimal=ko.computed({owner:this,read:function(){var r=e();return $.isNumeric(r)?a.percent?number_format(100*r,a.decimals,a.decimalSeparator,a.thousandsSeparator):number_format(r,a.decimals,a.decimalSeparator,a.thousandsSeparator):a.nullable?"":number_format(0,a.decimals,a.decimalSeparator,a.thousandsSeparator)},write:function(r){r=r.replace(a.thousandsSeparator,""),r=r.replace(a.decimalSeparator,".");var t,n=parseFloat(r);$.isNumeric(n)?(n=a.percent?n/100:n,t=n.toFixed(a.decimals+a.percent?2:0)):t=a.nullable?"":0,e()!==t?e(t):e.display.notifySubscribers(t)}}),e.clear=function(){e(a.nullable?null:0)},e.display=e.decimal,e},ko.extenders.percent=function(e,a){return a=$.extend({decimals:0,nullable:!0,thousandsSeparator:null,decimalSeparator:null},a),e.percent=ko.computed({owner:e,read:function(){var r=e();return null!=r&&void 0!=r&&""!=r?number_format(100*r,a.decimals,a.decimalSeparator,a.thousandsSeparator):a.nullable?"":0},write:function(r){r=r.replace(a.thousandsSeparator,""),r=r.replace(a.decimalSeparator,".");var t=parseFloat(r);e(null!=t&&void 0!=t&&""!=t?r/100:a.nullable?null:0)}}),e.clear=function(){e(null)},e.display=e.percent,e};